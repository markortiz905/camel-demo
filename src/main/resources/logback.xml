<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true">

    <!-- =========================================
        Default setup.
        Can be overriden by an external config file referred as:
        -Dlogging.config=file:/absolute/path/logback.xml
        ========================================= -->
   <conversionRule conversionWord="stack"
                   converterClass="net.logstash.logback.stacktrace.ShortenedThrowableConverter"/>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
       <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
           <providers>
               <mdc/>
               <pattern>
                   <pattern>
                       { "severity": "%level", "message" : "[%t] | %logger{20} | %replace(%message){'password=\\\"[^\"]*\"', 'password=\"XXXXXXXXX\"'} %stack{30,30,2048,rootFirst}"}
                   </pattern>
               </pattern>
           </providers>
       </encoder>
    </appender>

    <!-- =====  Loggers ===== -->
    <root level="WARN">
        <appender-ref ref="STDOUT"/>
    </root>

    <logger name="demo" level="TRACE"/>
    <logger name="org.jmxtrans.agent" level="INFO"/>
    <!-- CRaSH SSHD : Filtering out warnings generated by disconnects and netcat healthcheck probes -->
    <logger name="org.apache.sshd.server.session.ServerSession" level="ERROR"/>
    <logger name="org.apache.camel.component.file.remote" level="ERROR"/>

</configuration>
